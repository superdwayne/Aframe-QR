<!DOCTYPE html>
<html>
  <!-- include A-Frame obviously -->
  <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
 
<!-- include ar.js for A-Frame -->
<script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
<script src="https://unpkg.com/aframe-animation-component@%5E3.2.x/dist/aframe-animation-component.min.js"></script>


<script>



//   AFRAME.registerComponent('audiohandler', {
//   init:function() {
//      let playing = false;
//      let audio = document.querySelector("#neigh");
//      console.log(this.el,  "DPM")
//      this.el.addEventListener('click', () => {
//           if(!playing) {
//               audio.play();
//            } else {
//               audio.pause();
//               audio.currentTime = 0;
//            }
//            playing = !playing;
//      });
//   }
// })

AFRAME.registerComponent('audiohandler', {
  init: function () {
    let playing = false;
    let audio = document.querySelector("#neigh");

    const sceneEl = this.el;

    sceneEl.addEventListener('click', () => {
          if(!playing) {
              audio.play();
           } else {
              audio.pause();
              audio.currentTime = 0;
           }
           playing = !playing;
     });
  }
});

</script>

<body style='margin : 0px; overflow: hidden;'>
  <a-scene  
  audiohandler  
  embedded arjs='detectionMode: mono_and_matrix; matrixCodeType: 3x3; ' >
  
    <!-- <a-entity 
    light="type: point; intensity: 3.75; distance: 50; decay: 2"
    position="0 10 10"
    ></a-entity> -->
    <a-assets >
      <audio 
       id="neigh" 
      
       crossOrigin="anonymous"  
       src="https://cdn-static.farfetch-contents.com/Content/UP/EXPERIENCE/Metaverse/Shortmusic.mp4">
      </audio>
      <a-asset-item id="tree" crossOrigin="anonymous" src="https://cdn-static.farfetch-contents.com/Content/UP/EXPERIENCE/Metaverse/DPM-S-Walking-v2.glb"></a-asset-item>
    </a-assets>

    
      <!-- use your gltf model -->
    
        <!-- <a-entity light="type: spot; angle: 90; color: #AFA; intensity: 3.5" ></a-entity> -->
      
        <a-entity  lock-controls scale="2 2 2" animation-mixer="clip: WALK" rotation="0 90 0" gltf-model="#tree" position='-2 -1 -5' gesture-handler></a-entity>
       
       
        <a-entity 
        id="lightSphere"
        geometry="primitive: sphere; radius: 0.1; " material="shader: flat; opacity: 0" 
        light="type: spot; color: red; intensity: 3.5; " position="-1 1.8 -3"
        animation="property: position; to: 1 1.8 -3; dir: alternate; loop: true"></a-entity>

       
        <!-- <a-entity light="type: spot; angle: 45; color: #AFAAAF; intensity: 3.5" ></a-entity> -->
<!--       
        <a-entity >

          
          <a-marker preset='custom' type="pattern" url='https://raw.githubusercontent.com/superdwayne/Assets/main/kl.patt'></a-marker>
      </a-entity> -->

  </a-scene>
</body>
</html>